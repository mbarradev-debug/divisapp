# Version 1.4.0

**Release Date**: January 2026

## Summary

Version 1.4.0 introduces drag and drop reordering for favorites, replacing the previous arrow button controls. This provides a more natural and intuitive way to arrange favorite indicators on both desktop and mobile devices.

## Features Available in This Version

### Core Features (from previous versions)

- View all Chilean economic indicators with current values
- Favorite indicators with dedicated section at the top of home page
- Indicator detail pages with historical charts and analytics
- 7/30/90 day range selection for historical data
- Currency conversion with real-time calculation
- Smart conversion defaults based on context
- Recent indicators section showing recently viewed items
- Notification settings UI with local persistence

### New in v1.4.0

#### Drag and Drop Reordering

Favorites can now be reordered using drag and drop gestures:

- **Desktop**: Click and drag a favorite card to a new position
- **Mobile**: Touch and drag a favorite card to reorder

Visual feedback during drag operations:
- Dragged card elevates with shadow and slight scale increase
- Drop target highlights with border and background change
- Settling animation after drop completes

#### Press Feedback

Indicator cards now show subtle visual feedback when pressed:
- Slight scale reduction (98%) on active state
- Shadow appears during press
- Border becomes more prominent

#### Removed Features

- **Arrow controls**: The up/down arrow buttons previously used for reordering favorites have been removed in favor of drag and drop

## What Is Intentionally Not Included

These features were considered but not implemented:

- **Keyboard reordering**: No keyboard shortcuts for reordering (drag and drop only)
- **Undo functionality**: No way to revert a reorder action
- **Animation on reorder**: No smooth position animation between cards during drag
- **Multi-select drag**: Cannot drag multiple favorites at once

## Stability Notes

This version is stable and production-ready. The drag and drop implementation uses:

- Native HTML5 drag and drop API for desktop
- Touch events for mobile devices
- No external drag and drop libraries

Known limitations:
- On some older mobile browsers, touch drag may be less responsive
- Very fast successive drags may briefly show stale visual states

## Technical Changes

### Files Modified

| File | Change |
|------|--------|
| `components/home/favorite-indicator-item.tsx` | Added drag/drop and touch event handlers |
| `components/home/home-indicators.tsx` | Added drag state management and handlers |
| `lib/storage.ts` | Added `reorderFavorites(fromIndex, toIndex)` function |

### Files Removed

| File | Reason |
|------|--------|
| `components/ui/reorder-controls.tsx` | Replaced by drag and drop |

### API Changes

The `useFavorites` hook now returns:

```typescript
interface UseFavoritesReturn {
  favorites: string[];
  isFavorite: (codigo: string) => boolean;
  toggleFavorite: (codigo: string) => void;
  reorderFavorites: (fromIndex: number, toIndex: number) => void;  // NEW
}
```

The previous `moveFavorite(codigo, 'up' | 'down')` function has been removed.

## Changelog

### Added
- Drag and drop reordering for favorite indicators
- Touch support for drag and drop on mobile devices
- Visual feedback during drag operations (elevation, borders)
- Settling animation after successful reorder
- Press feedback on indicator cards (scale, shadow)

### Changed
- `useFavorites` hook now exposes `reorderFavorites` instead of `moveFavorite`
- Favorite cards no longer display arrow controls

### Removed
- `ReorderControls` component
- `moveFavorite` function from storage hook
- Up/down arrow buttons from favorite indicator cards

## Upgrade Notes

If you have code that references the removed `moveFavorite` function or `ReorderControls` component, update it to use the new `reorderFavorites` function:

```typescript
// Before (v1.3.x)
moveFavorite('dolar', 'up');
moveFavorite('dolar', 'down');

// After (v1.4.0)
reorderFavorites(currentIndex, targetIndex);
```

## Previous Versions

- [v1.3.1](v1.3.1.md) - Bug fixes
- [v1.3.0](v1.3.0.md) - Notification settings
- [v1.2.0](v1.2.0.md) - Insights and context
- [v1.1.0](v1.1.0.md) - Favorites, charts, analytics
- [v1.0.0](v1.0.0.md) - Initial release
